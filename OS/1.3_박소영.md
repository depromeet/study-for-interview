# 1. OS

1. 프로세스와 스레드 차이
2. 가상 메모리 및 관리, 쓰레싱 방지 법
3. **CPU 스케줄링**
4. 데드락 정의 및 처리 방법

**작성일** : ``2018.11.21``

**작성자** : `박소영`



***

## CPU 스케줄링

### 1) 정의

- 메모리 내의 준비 상태에 있는 작업 중 실행할 프로세스를 선택해 CPU를 할당하는 것

- **스케줄링**(scheduling)은 다중 프로그래밍을 가능하게 하는 운영 체제의 동작 기법이다. 운영 체제는 프로세스들에게 CPU 등의 자원 배정을 적절히 함으로써 시스템의 성능을 개선할 수 있다.

  

### 2) 분류

- **스케줄링 적용 시점**

  - **비선점 스케줄링 (Non-preemptive Scheduling)**

    프로세스가 I/O 요구 등으로 CPU를 **자진 반납할 때까지** CPU에 의한 실행을 보장해주는 프로그램으로, 작업 실행 전체, 또는 한 번의 CPU burst에 대해 적용된다

    > FCFS, SJF, HRRN 스케줄링 ...

  - **선점형 스케줄링 (Preemptive Scheduling)**

    시분할 시스템에서 타임 슬라이스가 소진되었거나, 인터럽트 혹은 시스템 호출 종료 시 현 프로세스보다 높은 우선순위의 프로세스가 나타나는 경우, **현 프로세스로부터 강제로 CPU를 회수하는 것**

    > RR, SRTF, 다단계 큐, 다단계 피드백 큐 스케줄링 ...

    

- **프로세스의 우선순위 변동 여부**

  - **정적 스케줄링 (Static Scheduling)** : 프로세스에 부여된 우선순위가 바뀌지 않음

  - **동적 스케줄링 (Dynamic Scheduling)** : 스케줄링 과정에서 프로세스에 부여된 우선순위가 바뀜

    

### 3) 스케줄링 알고리즘

- **비선점 스케줄링 (Non-preemptive Scheduling)**

  - **FCFS 스케줄링 (First Come First Served)**

    - 프로세스가 **도착한 순서**대로 CPU를 배정한다.
    - **호위 효과** (Convey Effect) : 수행 중인 긴 작업을 여러 개의 짧은 작업이 기다리는 문제

  - **SJF 스케줄링 (Shortest Job First)**

    - 각 작업의 다음 **CPU 버스트 시간**이 가장 작은 작업에 CPU를 할당!
    - 평균 대기 시작에 있어서는 최적의 알고리즘이다.
    - 차기 CPU 요구 시간을 알기가 어렵다는 문제점이 있다.

  - **HRN 스케줄링 (Highest Response-ratio, 우선순위)**

    - 우선순위는 각 프로세스에 주어지며, CPU는 **우선순위가 제일 높은 프로세스에 할당**되고, 우선순위가 같은 경우엔 **FCFS**로 처리한다.

    - 우선순위 고려사항 : 제한 시간, 기억 장소 요구량, 사용하는 파일 수 ...

    - 프로세스의 속성의 우선순위의 중요한 판단 기준이 된다.

    - **기아 상태** (Starvation) : 우선순위가 높은 작업이 계속적으로 들어올 경우 우선순위가 낮은 작업은 준비상태에서 보장 없이 머물게 된다.

      → **에이징** (Aging) 으로 해결 : 시스템에 머무는 시간이 증가함에 따라 우선순위를 높여준다.

    

- **선점형 스케줄링 (Preemptive Scheduling)**

  - **RR 스케줄링 (Round Robin)**

    - 우선순위가 같은 프로세스들을 번갈아가면서 **균등하게** 스케줄링하는 기법
    - 준비 큐를 원형 큐로 간주하고 각 프로세스에게 순환식으로 작은 단위의 시간량 만큼 CPU 할당
    - 일반적으로 **평균 반환 시간**이 SJF보다 크지만, 반응 시간은 좋은 편이다.

  - **다단계 큐 스케줄링**

    - 우선순위마다의 준비 큐를 형성하고, 항상 가장 높은 우선 순위 큐의 프로세스에 CPU를 할당
    - 각 큐는 라운드 로빈이나 **FCFS** 등 독자적인 스케줄링을 사용할 수 있다.

  - **다단계 피드백 큐 스케줄링**

    - 다단계 큐 + **동적인 프로세스 우선 순위 변화 적용**
    - CPU를 사용해 타임 슬라이스를 소진하면 하위 큐의 뒤로 삽입된다.
    - CPU를 오래 기다리면 다시 상위 큐로 올라갈 수 있다.

    

### 4) 성능 평가의 기준

- **CPU 사용률** (CPU Utilization) : CPU의 활용 정도. 전체 시스템 시간 중 CPU가 작업을 처리하는 시간의 비율
- **처리량** (Throughput) : CPU가 단위 시간당 처리하는 프로세스의 개수 (비율이 아닌 작업의 수)
- **반환 시간** (Turnaround Time) : 프로세스가 시작해서 작업을 마치고 끝날 때까지의 시간
- **대기 시간** (Waiting Time) : 프로세스가 준비 큐 내에서 대기하는 시간의 **총합**
- **응답 시간** (Response Time) : 대화형 시스템에서 임의 요구에 대해 시스템이 반응을 **시작**하는 데까지 걸리는 시간

> **TIP**
>
> - 효율성 추구 : CPU 사용률과 처리량을 최대화하고, 반환시간, 대기시간, 응답시간을 최소화!
> - 공평성 추구 : 각 기준의 평균치의 최적화와 편차의 최소화를 함께 고려해야 한다.
>
> 결과적으로 시스템의 형태에 따라 기준이 달라질 수 있고, 기준 간 **trade-off**가 있을 수 있음!